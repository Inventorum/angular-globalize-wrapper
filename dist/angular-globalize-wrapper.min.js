/* angular-globalize-wrapper - v0.0.1 - 2015-02-01
   Copyright (c) 2015 Ross Basarevych; Licensed MIT */

"use strict";var glModule=angular.module("globalizeWrapper",[]);glModule.provider("globalizeWrapper",function(){var a="bower_components/cldr-data",b="l10n";this.$get=["$q","$http","$rootScope",function(c,d,e){function f(){return u&&v}function g(f){c.all([d.get(a+"/main/"+f+"/currencies.json"),d.get(a+"/main/"+f+"/ca-gregorian.json"),d.get(a+"/main/"+f+"/timeZoneNames.json"),d.get(a+"/main/"+f+"/numbers.json"),d.get(b+"/"+f+".json")]).then(function(a){n=a[0].data,o=a[1].data,p=a[2].data,q=a[3].data,r=a[4].data,t=f,u=!0,h()})["catch"](function(){e.$broadcast("GlobalizeLoadError")})}function h(){f()&&(Globalize.load(n,o,p,q,i,j,k,l,m),Globalize.loadMessages(r),s=Globalize(t),e.$broadcast("GlobalizeLoadSuccess"))}var i,j,k,l,m,n,o,p,q,r,s=null,t=null,u=!1,v=!1;return c.all([d.get(a+"/supplemental/currencyData.json"),d.get(a+"/supplemental/likelySubtags.json"),d.get(a+"/supplemental/plurals.json"),d.get(a+"/supplemental/timeData.json"),d.get(a+"/supplemental/weekData.json")]).then(function(a){i=a[0].data,j=a[1].data,k=a[2].data,l=a[3].data,m=a[4].data,v=!0,h()})["catch"](function(){e.$broadcast("GlobalizeLoadError")}),{isLoaded:f,setLocale:g,getLocale:function(){return t},getGlobalize:function(){return s}}}],this.setCldrBasePath=function(b){a=b},this.setL10nBasePath=function(a){b=a}}),glModule.filter("glDate",["globalizeWrapper",function(a){return function(b,c){if(angular.isUndefined(b)||angular.isUndefined(c))return void 0;if(0==b.length)return"";var d=a.getGlobalize();return d.formatDate(b,c)}}]),glModule.filter("glMessage",["globalizeWrapper",function(a){return function(b,c){if(angular.isUndefined(b))return void 0;if(0==b.length)return"";var d=a.getGlobalize();return d.formatMessage(b,c)}}]);